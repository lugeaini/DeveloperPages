bplist00_WebMainResource	
_WebResourceData_WebResourceMIMEType_WebResourceTextEncodingName^WebResourceURL_WebResourceFrameNameOE<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1561.2">
  <style type="text/css">
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px 'PingFang SC'; color: #444444; -webkit-text-stroke: #444444}
    p.p3 {margin: 0.0px 0.0px 12.0px 0.0px; line-height: 24.0px; font: 12.0px 'PingFang SC'; color: #444444; -webkit-text-stroke: #444444}
    p.p4 {margin: 0.0px 0.0px 12.0px 0.0px; line-height: 24.0px; font: 12.0px 'Helvetica Neue'; color: #444444; -webkit-text-stroke: #444444}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 24.0px; font: 12.0px 'Helvetica Neue'}
    p.p6 {margin: 0.0px 0.0px 12.0px 0.0px; line-height: 24.0px; font: 12.0px 'PingFang SC Semibold'; color: #444444; -webkit-text-stroke: #444444}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 27.2px; font: 16.0px 'PingFang SC Semibold'; color: #444444; -webkit-text-stroke: #444444}
    li.li7 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 24.0px; font: 12.0px 'PingFang SC'; color: #444444; -webkit-text-stroke: #444444}
    li.li8 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 24.0px; font: 12.0px 'Helvetica Neue'; color: #444444}
    span.s1 {font: 22.0px 'PingFang SC'; font-kerning: none}
    span.s2 {font: 12.0px 'Helvetica Neue'; font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s3 {font: 16.0px 'Helvetica Neue'; font-kerning: none; color: #b8b8b8; background-color: #ffffff; -webkit-text-stroke: 0px #b8b8b8}
    span.s4 {font-kerning: none; background-color: #ffffff}
    span.s5 {font-kerning: none; color: #999999; background-color: #ffffff; -webkit-text-stroke: 0px #999999}
    span.s6 {font: 12.0px 'Helvetica Neue'; font-kerning: none; background-color: #ffffff}
    span.s7 {font-kerning: none; -webkit-text-stroke: 0px #000000}
    span.s8 {font: 12.0px 'PingFang SC'; font-kerning: none; background-color: #ffffff}
    span.s9 {font: 12.0px 'Helvetica Neue'; background-color: #ffffff; -webkit-text-stroke: 0px #000000}
    span.s10 {font: 12.0px 'Apple Symbols'; font-kerning: none; background-color: #ffffff}
    span.s11 {background-color: #ffffff}
    span.s12 {font-kerning: none; background-color: #ffffff; -webkit-text-stroke: 0px #444444}
    span.s13 {font: 16.0px 'PingFang SC'; font-kerning: none; background-color: #ffffff}
    span.s14 {font: 16.0px 'Helvetica Neue'; font-kerning: none; background-color: #ffffff}
    span.s15 {font: 12.0px 'Lucida Grande'; font-kerning: none; background-color: #ffffff}
    span.s16 {font: 12.0px 'PingFang SC'; font-kerning: none; color: #105cb6; -webkit-text-stroke: 0px #105cb6}
    span.s17 {font: 12.0px 'Helvetica Neue'; font-kerning: none; color: #105cb6; -webkit-text-stroke: 0px #105cb6}
    ol.ol1 {list-style-type: decimal}
    ul.ul1 {list-style-type: disc}
  </style>
</head>
<body>
<h2 style="margin: 0.0px 0.0px 25.0px 0.0px; line-height: 30.8px; font: 22.0px 'PingFang SC Semibold'; color: #222222; -webkit-text-stroke: #222222; background-color: #ffffff"><span class="s1"><b>区块链是什么，如何简单易懂地介绍区块链？</b></span></h2>
<p class="p2"><span class="s2"></span><span class="s3"> </span><span class="s4">知乎用户，</span><span class="s5">一颗匠心</span></p>
<p class="p3"><span class="s4"><b>特别提醒</b>：比特币采用区块链技术，但是区块链并不等同于比特币；全篇基于比特币底层区块链技术讲述，所以，部分模型可能不适用于以太坊等。另外，由于文章采用了一定的抽象、类举的叙事方式，中间或多或少有些地方会跟区块链底层严谨的技术实现有出入，如果让你觉得困惑，可以在评论下方留言或者私信我一起探讨。最后，也是受限于自己知识结构的不完整，这篇文章会随着我对区块链更深入认识后，随时进行修订，最后更新时间可参考该回答下方的时间戳。</span></p>
<p class="p4"><span class="s4"><i>---</i></span></p>
<p class="p3"><span class="s4">首先不要把区块链想的过于高深，他是一个分布在全球各地、能够协同运转的数据库存储系统，区别于传统数据库运作</span><span class="s6">——</span><span class="s4">读写权限掌握在一个公司或者一个集权手上（中心化的特征），区块链认为，任何有能力架设服务器的人都可以参与其中。来自全球各地的掘金者在当地部署了自己的服务器，并连接到区块链网络中，成为这个分布式数据库存储系统中的一个节点；一旦加入，该节点享有同其他所有节点完全一样的权利与义务（去中心化、分布式的特征）。与此同时，对于在区块链上开展服务的人，可以往这个系统中的任意的节点进行读写操作，最后全世界所有节点会根据某种机制的完成一次又依次的同步，从而实现在区块链网络中所有节点的数据完全一致。</span></p>
<p class="p5"><span class="s7"></span></p>
<p class="p6"><span class="s6"><b># </b></span><span class="s8"><b>问题的由来</b></span></p>
<p class="p3"><span class="s4">我们反复提到区块链是一个去中心化的系统，确实，「去中心化」在区块链世界里面是一个很重要的概念，很多模型（比如账本的维护、货币的发行、时间戳的设计、网络的维护、节点间的竞争等等等等）的设计都依赖于这个中心思想，那到底什么是去中心化呢？在解释真正去中心化之前，我们还是先简单了解下什么是中心化吧。</span></p>
<p class="p6"><span class="s8"><b>中心化？</b></span></p>
<p class="p3"><span class="s4">回忆一下你在网上购买一本书的流程：</span></p>
<ol class="ol1">
  <li class="li7"><span class="s9"></span><span class="s4">第一步，你下单并把钱打给<b>支付宝</b>；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第二步，<b>支付宝</b>收款后通知卖家可以发货了；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第三步，卖家收到<b>支付宝</b>通知之后给你发货；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第四步，你收到书之后，觉得满意，在<b>支付宝</b>上选择确认收货；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第五步，<b>支付宝</b>收到通知，把款项打给卖家。流程结束。</span></li>
</ol>
<p class="p3"><span class="s4">你会发现，虽然你是在跟卖家做交易，但是，所有的关键流程都是在跟支付宝打交道。这样的好处在于：万一哪个环节出问题，卖家和买家都可以通过支付宝寻求帮助，让支付宝做出仲裁。这就是一个最简单的基于中心化思维构建的交易模型，它的价值显著，就是建立权威，通过权威背书来获得多方的信任，同时依赖权威方背后的资本和技术实力确保数据的可靠安全。</span></p>
<p class="p3"><span class="s4">你一定会摆出一个巨大的问号脸</span><span class="s6"> </span><span class="s10">⊙</span><span class="s6">.</span><span class="s10">⊙</span><span class="s6">?——“</span><span class="s4">通过权威背书来获得多方的信任，同时依赖权威方背后的资本和技术实力确保数据的可靠安全</span><span class="s6">”</span><span class="s4">，真的可以嘛？！</span></p>
<p class="p3"><span class="s4">假如说，支付宝程序发生重大</span><span class="s6"> BUG</span><span class="s4">，导致一段时间内的转账记录全部丢失，或者更彻底一点，支付宝的服务器被金三胖的一个导弹全部炸毁了。而我刚刚转出去的</span><span class="s6"> 100 </span><span class="s4">元找谁说理去，这个时候，你就成了刀殂上的鱼肉；支付宝有良心，会勉为其难承认你刚刚转账的事实，但他不承认你也没辙，因为确实连他自己也不知道这笔转账是否真实存在。</span></p>
<p class="p3"><span class="s4">上述就是中心化最大的弊端</span><span class="s6">——</span><span class="s4">过分依赖中心和权威，也就意味着逐渐丧失自己的话语权。</span></p>
<p class="p6"><span class="s8"><b>去中心化？</b></span></p>
<p class="p3"><span class="s4">那么去中心化的形态是什么样子呢？还是拿刚才那个例子继续，我们构建一个极简的去中心化的交易系统，看看我们是如何在网络上从不认识的卖家手里买到一本书的。</span></p>
<ol class="ol1">
  <li class="li7"><span class="s9"></span><span class="s4">第一步，你下单并把钱打给卖家；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第二步，你将这条转账信息记录在自己账本上；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第三步，你将这条转账信息广播出去；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第四步，卖家和支付宝在收到你的转账信息之后，在他们自己的账本上分别记录；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第五步，卖家发货，同时将发货的事实记录在自己的账本上；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第六步，卖家把这条事实记录广播出去；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第七步，你和支付宝收到这条事实记录，在自己的账本上分别记录；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">第八步，你收到书籍。至此，交易流程走完。</span></li>
</ol>
<p class="p3"><span class="s4">刚才</span><span class="s6">“</span><span class="s4">人为刀俎我为鱼肉</span><span class="s6">”</span><span class="s4">的情况在这个体系下就比较难发生，因为所有人的账本上都有着完全一样的交易记录，支付宝的账本服务器坏了，对不起卖家的账本还存在，我的账本还存在；这些都是这笔交易真实发生的铁证。</span></p>
<p class="p3"><span class="s4">当然，在这套极简的交易系统中，你已经发现了诸多漏洞和不理解，比如说三方当中有一个是坏人，他故意记录了对他更有利的转账信息怎么办；又比如说消息在传递过程中被黑客篡改了怎么办等等等等。这在以往的计算机概论或者计算机网络书本上中可能都有提及到</span><span class="s6">——“</span><span class="s4">类两军</span><span class="s6">”</span><span class="s4">和</span><span class="s6">“</span><span class="s4">拜占庭将军</span><span class="s6">”</span><span class="s4">问题。这里就不打算赘述，因为暂时跟主线不相关，感兴趣的同学可以去</span><span class="s6"> Google </span><span class="s4">或者百度一下，你只需要知道，在我们下面即将展开讲到的区块链系统中，通过巧妙的设计，足以解决上述存在的</span><span class="s6"> BUG</span><span class="s4">。</span></p>
<p class="p3"><span class="s4">既然话已说到这份上，相信了解一点技术、特别是有运维背景的同学大概能够从极简交易系统中窥视到了更多区块链的一些影子</span><span class="s6">——</span></p>
<ol class="ol1">
  <li class="li7"><span class="s9"></span><span class="s4">分布式存储，通过多地备份，制造数据冗余</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">让所有人都有能力都去维护共同一份数据库</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">让所有人都有能力彼此监督维护数据库的行为</span></li>
</ol>
<p class="p3"><span class="s4">在我看来，你猜测的基本上没错。其实这些就是区块链技术最核心的东西，外人看起来高大上、深不可测，但探究其根本发现就是这么简单和淳朴。当然，这里面肯定会有很多很多很多细枝末节的技术需要重构。</span></p>
<p class="p3"><span class="s4">如果你差不多认同上面的观点，那我们应该基本上可以达成共识，分布式部署肯定是构建去中心化网络理所当然的解决方向</span><span class="s6">——</span><span class="s4">通过</span><span class="s6"> P2P </span><span class="s4">协议将全世界所有节点计算机彼此相互连接，形成一张密密麻麻的网络；以巧妙的机制，通过节点之间的交易数据同步来保证全球计算机节点的数据共享和一致。</span></p>
<p class="p3"><span class="s4">哈哈，说的轻巧，</span><span class="s6">“</span><span class="s4">交易数据这么重要的东西，在一个完全不信任的</span><span class="s6"> P2P </span><span class="s4">网络节点中以一种错综复杂的方式传递，数据的一致性和安全性谁来保证，如果说互相监督，他们到底怎么做到？</span><span class="s6">”</span></p>
<p class="p3"><span class="s4">好了，不卖关子了，下面让我们围绕这个最最最最直接的问题开始进入到真正区块链的世界，抽丝剥茧看看它到底是如何一步一步形成的，又是如何一步一步稳定运转。</span></p>
<p class="p6"><span class="s6"><b># </b></span><span class="s8"><b>从全球节点到交易数据</b></span></p>
<p class="p5"><span class="s7"></span></p>
<p class="p3"><span class="s4">这张图的制作的意义为的是帮助你在宏观上先快速理解区块链中所涉及到的相关名词以及他们的层级关系。同时，文章的知识结构和设计思路也大抵上也会按照：</span></p>
<ol class="ol1">
  <li class="li7"><span class="s9"></span><span class="s4">首先，将区块作为最小单位体，讲述极简区块链系统是如何运转的；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">接着，进入到比区块更小单位体</span><span class="s6">——</span><span class="s4">交易记录，理解区块链是如何处理数据的；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">最后，将所有知识点柔和在一起，重回到区块和区块链，完整讲述整个工作流程。</span></li>
</ol>
<p class="p3"><span class="s4">希望你在这个引导和结构下有一个比较好的阅读体验。</span><span class="s6">Let's go~</span></p>
<p class="p6"><span class="s6"><b># </b></span><span class="s8"><b>区块，混沌世界的起源</b></span></p>
<p class="p3"><span class="s4">既然已经达成共识，所以，我们事先构建好了一个去中心化的</span><span class="s6"> P2P </span><span class="s4">网络；同时，为了让读者朋友们听起来更轻松，我先粗暴的规定在这个极简的区块链系统里，每十分钟有且仅产生一笔交易。</span></p>
<p class="p3"><span class="s4">故事继续，在节点的视野里，大概每十分钟会凭空产生一个建立在自己平行宇宙世界的神奇区块（你可以将区块想象为一个盒子），这个区块里放着一些数字货币以及一张小纸条，小纸条上记录了这十分钟内产生的那唯一一笔交易信息，比如说</span><span class="s6">——“</span><span class="s4">小</span><span class="s6"> A </span><span class="s4">转账给了小</span><span class="s6"> B100 </span><span class="s4">元</span><span class="s6">”</span><span class="s4">；当然，这段信息肯定是被加密处理过的，为的就是保证只有小</span><span class="s6"> A </span><span class="s4">和小</span><span class="s6"> B</span><span class="s4">（通过他们手上的钥匙）才有能力解读里面真正的内容。</span></p>
<p class="p3"><span class="s4">这个神奇的区块被创造出来之后，很快被埋在了地底下，至于埋在哪里？没有一个人不知道，需要所有计算机节点一起参与进来掘地三尺后才有可能找到（找到一个有效的工作量证明）。显然，这是一件工作量巨大、成果随机的事件。但是呢，对于计算机节点来说，一旦从地底下挖出这个区块，他将获得区块内价值不菲的数字货币，以及</span><span class="s6">“</span><span class="s4">小</span><span class="s6"> A </span><span class="s4">转账给了小</span><span class="s6"> B100 </span><span class="s4">元</span><span class="s6">”</span><span class="s4">过程中小</span><span class="s6"> A </span><span class="s4">所支付的小费。同时，对于这个节点来说，也只有他才有权利真正记录小纸条里的内容，这是一份荣耀，而其他节点相当于只能使用它的复制品，一个已经没有数字货币加持的副本。当然这个神奇的区块还有一些其他很特别的地方，后面我们会再细细聊。</span></p>
<p class="p3"><span class="s4">为了更好的描述，我们将计算机节点从地底下挖出区块的过程叫做「挖矿」，刚才说了，这是一件工作量巨大、运气成分较多、但收益丰厚的事儿。</span></p>
<p class="p3"><span class="s4">过了一会儿，来自中国上海浦东新区张衡路上的一个节点突然跳出来很兴奋的说：</span><span class="s6">“ </span><span class="s4">我挖到区块了！里面的小纸条都是有效的！奖励归我！</span><span class="s6">” </span><span class="s4">。虽然此刻张衡路节点已经拿到了数字货币，但对于其他计算机节点来说，因为这里面还涉及到其他一些利益瓜葛，他们不会选择默认相信张衡路节点所说的话；基于陌生节点彼此不信任的原则，他们拿过张衡路节点所谓挖到的区块（副本），开始校验区块内的小纸条信息是否真实有效等等。在区块链世界里，节点们正是通过校验小纸条信息的准确性，或间接或直接判断成功挖出区块的节点是否撒谎。（如何定义小纸条信息真实有效，后面会讲解，这里暂不做赘述）。</span></p>
<p class="p3"><span class="s4">在校验过程中，各个节点们会直接通过下面两个行为表达自己对张衡路节点的认同（准确无误）和态度：</span></p>
<ul class="ul1">
  <li class="li7"><span class="s9"></span><span class="s4">停止已经进行了一半甚至</span><span class="s6"> 80%</span><span class="s4">的挖矿进程；</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">将张衡路节点成功挖出的区块（副本）追加到自己区块链的末尾。</span></li>
</ul>
<p class="p3"><span class="s4">你可以稍微有点困惑：停止可能已经执行了</span><span class="s6"> 80%</span><span class="s4">的挖矿行为，那之前</span><span class="s6"> 80%</span><span class="s4">的工作不是就白做了嘛？！然后，区块链的末尾又是个什么鬼东西？</span></p>
<p class="p3"><span class="s4">对于第一个困惑。我想说，你说的一点没错，但是没办法，现实就是这么残酷，即便工作做了</span><span class="s6"> 80%</span><span class="s4">，那也得放弃，这</span><span class="s6"> 80%</span><span class="s4">的工作劳苦几乎可以视为无用功，绝对的伤财劳众。第二个困惑，区块链和区块链的末尾是什么鬼？这里因为事先并没有讲清楚，但是你可以简单想象一下：区块是周期性不断的产生和不断的被挖出来，一个计算机节点可能事先已经执行了</span><span class="s6"> N </span><span class="s4">次</span><span class="s6">“</span><span class="s4">从别人手上拿过区块</span><span class="s6"> -&gt; </span><span class="s4">校验小纸条有效性</span><span class="s6">”</span><span class="s4">的流程，肯定在自己的节点上早已经存放了</span><span class="s6"> N </span><span class="s4">个区块，这些区块会按照时间顺序整齐的一字排列成为一个链状。没错，这个链条，就是你一直以来认为的那个区块链。如果你还是不能够理解，没关系，文章后面还会有很多次机会深入研究。</span></p>
<p class="p6"><span class="s6"><b># </b></span><span class="s8"><b>走进区块内，探索消息的本质</b></span></p>
<p class="p3"><span class="s4">上面我们构建了一个最简单的区块链世界的模型，相信大多数同学都已经轻松掌握了。但是别骄傲也别着急，这还只是一些皮毛中的皮毛，坐好，下面我们准备开车了。</span></p>
<p class="p3"><span class="s4">前面我们说到</span><span class="s6">“</span><span class="s4">大概每十分钟会凭空产生一个神奇的区块，这个区块里放了一张小纸条，上面记录了这十分钟内产生的这唯一一笔交易信息</span><span class="s6">”</span><span class="s4">。显然，十分钟内产生的交易肯定远不止一条，可能是上万条，这上万条数据在区块链世界是如何组织和处理的呢？另外，为什么在纸条上记录的只是某一次的交易信息，而不是某一个人的余额？余额好像更符合我们现实世界的理解才对。</span></p>
<p class="p3"><span class="s4">既然存在这样那样的疑问。现在我们就把视线暂时从</span><span class="s6">“</span><span class="s4">区块</span><span class="s6">”</span><span class="s4">、</span><span class="s6">“</span><span class="s4">区块链</span><span class="s6">”</span><span class="s4">这些看起来似乎较大实体的物质中移开，进入到区块内更微观的世界里一探究竟，看看小纸条到底是怎么一回事，它的产生以及它终其一生的使命：</span></p>
<ol class="ol1">
  <li class="li7"><span class="s9"></span><span class="s4">发起交易的时候，发起人会收到一张小纸条，他需要将交易记录比如说</span><span class="s6">“</span><span class="s4">盗盗转账给张三</span><span class="s6"> 40 </span><span class="s4">元</span><span class="s6">”</span><span class="s4">写在纸上。说来也神奇，当写完的那一刹那，在小纸条的背面会自动将这段交易记录格式化成至少包含了</span><span class="s6">“</span><span class="s4">输入值</span><span class="s6">”</span><span class="s4">和</span><span class="s6">“</span><span class="s4">输出值</span><span class="s6">”</span><span class="s4">这两个重要字段；</span><span class="s6">“</span><span class="s4">输入值</span><span class="s6">”</span><span class="s4">用于记录数字货币的有效来源，</span><span class="s6">“</span><span class="s4">输出值</span><span class="s6">”</span><span class="s4">记录着数字货币发往的对象。</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">刚刚创建的小纸条立马被标记成为</span><span class="s6">“</span><span class="s4"><b>未确认</b></span><span class="s6">”</span><span class="s4">的小纸条。从地下成功挖出区块并最终连接到区块链里的小纸条一开始会被标记为</span><span class="s6">“</span><span class="s4"><b>有效</b></span><span class="s6">”</span><span class="s4">。若这条有效的小纸条作为其他交易的输入值被使用，那么，这个有效的小纸条很快会被标记为</span><span class="s6">“</span><span class="s4"><b>无效</b></span><span class="s6">”</span><span class="s4">。因为各种原因，区块从链上断开、丢弃，曾经这个区块内被标记为</span><span class="s6">“</span><span class="s4">有效</span><span class="s6">”</span><span class="s4">的小纸条会被重新标记为</span><span class="s6">“</span><span class="s4">未确认</span><span class="s6">”</span><span class="s4">。</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">区块链里面没有账户余额的概念，你真正拥有的数字资产实际上是一段交易信息；通过简单的加减法运算获知你数字钱包里的余额。</span></li>
</ol>
<p class="p3"><span class="s4">上面的</span><span class="s6"> 1</span><span class="s4">、</span><span class="s6">2</span><span class="s4">、</span><span class="s6">3 </span><span class="s4">仅仅作为结论一开始强行灌输给你的知识点，其中有几个描述可能会有点绕，让你觉得云里雾里，没有关系，因为我们立刻、马上就开始会细说里面的细枝末节。</span></p>
<p class="p5"><span class="s7"></span></p>
<p class="p3"><span class="s4">上图就是从无数打包进区块内的小纸条中，抽取出来的一张，以及它最终被格式化后的缩影。单看右侧的图可能很容易产生误会，虽然看起来有多行，但实际上就是</span><span class="s6">“</span><span class="s4">盗盗转账给张三</span><span class="s6"> 40 </span><span class="s4">个比特币</span><span class="s6">”</span><span class="s4">这一条交易数据另外的一种呈现形态。因为区块链世界里面这么规定，每一条交易记录，必须有能力追溯到交易发起者</span><span class="s6"> </span><span class="s4">发起这笔交易、其中所涉及金额的上一笔全部交易信息；即这笔钱从何而来的问题。这其实很容易理解，在去中心化的网络中，通过建立交易链、和通过交易链上的可溯源性间接保证数据安全和有效。</span></p>
<p class="p3"><span class="s4">我们继续看，在区块链世界里，我们是如何仅通过</span><span class="s6">“</span><span class="s4">盗盗转账给张三</span><span class="s6"> 40 </span><span class="s4">个比特币</span><span class="s6">” </span><span class="s4">这条交易信息完成转账流程的。其实跟现实中你在路边买一个包子的流程大抵上相同。</span></p>
<p class="p6"><span class="s8"><b>第一步：判断是否有足够的余额完成交易</b></span></p>
<p class="p3"><span class="s4">这里我们再一次重申，区块链世界是没有余额的概念，余额是通过简单数字的加减最终获得，你拥有所谓的数字货币实际上是因为你拥一条交易记录，即</span><span class="s6"> “</span><span class="s4">盗盗转账给张三</span><span class="s6"> 40 </span><span class="s4">个比特币</span><span class="s6">”</span><span class="s4">！这里，我们还是拿这条记录说事：</span></p>
<p class="p3"><span class="s4">追溯</span><span class="s6">“</span><span class="s4">输出值</span><span class="s6">”</span><span class="s4">是</span><span class="s6">“</span><span class="s4">盗盗</span><span class="s6">”</span><span class="s4">相关的<b>全部有效交易记录</b>作为，对有效交易中的数字进行简单求和，判断是否大于等于</span><span class="s6"> 40</span><span class="s4">，如果确实大于等于，则将这些有效的交易记录合并形成一条新的交易记录（如下图）。如果小于</span><span class="s6"> 40</span><span class="s4">，其实可以不需要再继续往下探讨。</span></p>
<p class="p5"><span class="s7"></span></p>
<p class="p3"><span class="s4">就上图的例子，我们追溯到曾经转账给盗盗的<b>有效交易记录</b>有</span><span class="s6">“</span><span class="s4">小</span><span class="s6"> A </span><span class="s4">转账给盗盗</span><span class="s6"> 10 btc”</span><span class="s4">、</span><span class="s6">“</span><span class="s4">小</span><span class="s6"> B </span><span class="s4">转账给盗盗</span><span class="s6"> 20 btc”</span><span class="s4">、</span><span class="s6">“</span><span class="s4">小</span><span class="s6"> C </span><span class="s4">转账给盗盗</span><span class="s6"> 25 btc”</span><span class="s4">，我们需要将这三条交易记录合并成一条更复杂描述的交易记录，即</span><span class="s6"> “( </span><span class="s4">小</span><span class="s6"> A </span><span class="s4">转账给盗盗</span><span class="s6"> 10 btc + </span><span class="s4">小</span><span class="s6"> B </span><span class="s4">转账给盗盗</span><span class="s6"> 20 btc + </span><span class="s4">小</span><span class="s6"> C </span><span class="s4">转账给盗盗</span><span class="s6"> 25 btc ) </span><span class="s4">转账给张三</span><span class="s6"> 40 btc ”</span></p>
<p class="p6"><span class="s8"><b>第二步：判断是否需要找零</b></span></p>
<p class="p3"><span class="s4">对追溯到的有效交易数字求和，如果发现大于需要支付的金额，需要将多出的数字重新支付给自己，相当于找零。对应生成了一条全新的交易记录（如下图）。</span></p>
<p class="p5"><span class="s7"></span></p>
<p class="p4"><span class="s8">就上图例子来说，我们最后合并成的交易记录</span><span class="s4"> “( </span><span class="s8">小</span><span class="s4"> A </span><span class="s8">转账给盗盗</span><span class="s4"> 10 btc + </span><span class="s8">小</span><span class="s4"> B </span><span class="s8">转账给盗盗</span><span class="s4"> 20 btc + </span><span class="s8">小</span><span class="s4"> C </span><span class="s8">转账给盗盗</span><span class="s4"> 25 btc + </span><span class="s8">盗盗转账给盗盗</span><span class="s4"> 15 btc ) </span><span class="s8">转账给张三</span><span class="s4"> 40 btc ” </span><span class="s8">事实上等同于</span><span class="s4">“</span><span class="s8">盗盗转账给张三</span><span class="s4"> 40 btc”</span><span class="s8">。其中</span><span class="s4">“</span><span class="s8">盗盗转账给盗盗</span><span class="s4"> 15 btc”</span><span class="s8">就可以理解找零。</span></p>
<p class="p6"><span class="s8"><b>第三步：发出去，让全球节点认同和备份小纸条</b></span></p>
<p class="p3"><span class="s4">这条内部重新处理过的复杂交易记录被塞进区块，埋到地下，等待节点挖出来，一旦区块被挖矿成功，并且该区块最终被连在了区块链的主链上。张三将最终拥有了这条交易记录，而先前的</span><span class="s6">“</span><span class="s4">小</span><span class="s6"> A </span><span class="s4">转账给盗盗</span><span class="s6"> 10 btc” </span><span class="s4">、</span><span class="s6">“</span><span class="s4">小</span><span class="s6"> B </span><span class="s4">转账给盗盗</span><span class="s6"> 20 btc” </span><span class="s4">、</span><span class="s6">“</span><span class="s4">小</span><span class="s6"> C </span><span class="s4">转账给盗盗</span><span class="s6"> 25 btc”</span><span class="s4">都将被视为已经使用过的交易记录</span><span class="s6">——</span><span class="s4">从此被贴上</span><span class="s6">“</span><span class="s4">无效</span><span class="s6">”</span><span class="s4">的标签，意味着这些交易记录将永远不会再被追溯到。</span></p>
<p class="p3"><span class="s4">我们最后一次重申，只是希望让你加深印象：拥有数字货币</span><span class="s6">=</span><span class="s4">拥有交易记录！</span></p>
<p class="p6"><span class="s8"><b>通过设计巧妙的精巧密码学保证数据安全</b></span></p>
<p class="p3"><span class="s4">记录着交易信息的小纸条借助区块这个载体，在分布式的网络中以不同的轨迹错综复杂的传递，我们前面说了，你真正拥有的数字资产实际上是一段交易信息，而不是你常规意义上理解的货币。所以这个过程就需要重点解决两个问题：</span></p>
<ul class="ul1">
  <li class="li7"><span class="s9"></span><span class="s4">接受到的这条交易记录在传输过程没有被其他人所篡改</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">接受到的这条交易记录确实是由发起交易的人所创造</span></li>
</ul>
<p class="p3"><span class="s4">在这里，我们需要事先引入两个知识点，可能稍微有点难消化，但都是计算机领域较为成熟的和基础的概念。</span></p>
<p class="p3"><span class="s4">第一个知识点：</span><span class="s6">Hash()</span><span class="s4">函数。你只需要知道，任意长度的字符串、甚至文件体本身经过</span><span class="s6"> Hash </span><span class="s4">函数工厂的加工，都会输出一个固定长度的字符串；同时，输入的字符串或者文件稍微做一丢丢的改动，</span><span class="s6">Hash() </span><span class="s4">函数给出的输出结果都将发生翻天覆地的改变。注意，</span><span class="s6">Hash()</span><span class="s4">函数是公开的，任何人都能使用。</span></p>
<p class="p5"><span class="s7"></span></p>
<p class="p3"><span class="s4">第二个知识点：非对称加密。你也只需要了解，任何人手里都有两把钥匙，其中一把只有自己知道，叫做</span><span class="s6">“</span><span class="s4">私钥</span><span class="s6">”</span><span class="s4">，以及一把可以公布于众，叫做</span><span class="s6">“</span><span class="s4">公钥</span><span class="s6">”</span><span class="s4">；通过私钥加密的信息，必须通过公钥才能解密，连自己的私钥也无解。公钥可以通过私钥生成多把。</span></p>
<p class="p3"><span class="s4">有了这些知识点的加持，上面两个问题开始变得有解。下面我们来看下内部是如何扭转和工作的吧，这里拿</span><span class="s6">“</span><span class="s4">小</span><span class="s6"> A </span><span class="s4">转账给了小</span><span class="s6"> B 100 </span><span class="s4">元钱</span><span class="s6">” </span><span class="s4">举例：</span></p>
<p class="p5"><span class="s7"></span></p>
<ol class="ol1">
  <li class="li7"><span class="s9"><b></b></span><span class="s4"><b>第一步</b>：小</span><span class="s6"> A </span><span class="s4">会先用</span><span class="s6"> Hash </span><span class="s4">函数对自己的小纸条进行处理，得到一个固定长度的字符串，这个字符串就等价于这张小纸条。</span></li>
  <li class="li7"><span class="s9"><b></b></span><span class="s4"><b>第二步</b>：小</span><span class="s6"> A </span><span class="s4">使用只有自己知道的那一把私钥，对上面固定长度的字符串进行再加密，生成一份名叫数字签名的字符串，这份数字签名能够充分证明是基于这张小纸条的。你可以这么理解，在现实中，你需要对某一份合同的签署，万一有人拿你曾经在其他地方留下的签名复制粘贴过来怎么办？！最好的办法，就是在你每一次签名的时候，故意在字迹当中留下一些同这份合同存在某种信息关联的小细节，通过对小细节的观察可以知道这个签名有没有被移花接木。步骤一和步骤二的结合就是为了生成这样一份有且仅针对这条小纸条有效的签名。</span></li>
  <li class="li7"><span class="s9"><b></b></span><span class="s4"><b>第三步：</b>小</span><span class="s6"> A </span><span class="s4">将「明文的小纸条」、刚刚加密成功的「数字签名」，以及自己那把可以公布于众的「公钥」打包一起发给小</span><span class="s6"> B</span><span class="s4">。</span></li>
  <li class="li7"><span class="s9"><b></b></span><span class="s4"><b>第四步：</b>当小</span><span class="s6"> B </span><span class="s4">收这三样东西，首先会将明文的小纸条进行</span><span class="s6"> Hash()</span><span class="s4">处理，得到一个字符串，我们将其命名为</span><span class="s6">“</span><span class="s4">字符串</span><span class="s6"> 1”</span><span class="s4">。然后，小</span><span class="s6"> B </span><span class="s4">使用小</span><span class="s6"> A </span><span class="s4">公布的公钥，对发过来的数字签名进行解密，得到另外一个</span><span class="s6">“</span><span class="s4">字符串</span><span class="s6"> 2”</span><span class="s4">。通过比对</span><span class="s6">“</span><span class="s4">字符串</span><span class="s6"> 1”</span><span class="s4">和</span><span class="s6">“</span><span class="s4">字符串</span><span class="s6"> 2”</span><span class="s4">的一致性，便可充分证明：小</span><span class="s6"> B </span><span class="s4">接受到的小纸条就是小</span><span class="s6"> A </span><span class="s4">发出来的小纸条，这张小纸条在中途没有被其他人所篡改；且这张小纸条确实是由小</span><span class="s6"> A </span><span class="s4">所编辑。</span></li>
</ol>
<p class="p3"><span class="s4">可以看得出来，加解密的过程几乎是一环套一环，中途任何环节被篡改，结果都是大相径庭。借助这一连串的机制，其实已经能够很好的在公开、匿名、彼此不信任的分布式网络环境中解决数字交易过程中可能遇到的很多问题。这个环节可能确实有点难理解，现在，我需要你停下来，静下心，花上几分钟闭目慢慢回味其中设计精湛的地方。</span></p>
<p class="p3"><span class="s4">掌握了这部分知识以后，我们在这里回答一下前面没有解释清楚的问题，「节点对区块的检验」检验的到底是什么？实际上就是：</span></p>
<ul class="ul1">
  <li class="li7"><span class="s9"></span><span class="s4">检验区块内的交易记录签名是否准确（是否被篡改）</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">检验区块内的交易记录输入值是否</span><span class="s6">“</span><span class="s4">有效</span><span class="s6">”</span><span class="s4">（是否使用过）</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">检验区块内的交易记录输入值的数字之和是否大于等于输出值的数字</span></li>
  <li class="li8"><span class="s11"></span><span class="s12">…</span></li>
</ul>
<p class="p3"><span class="s6"><b># </b></span><span class="s4"><b>重回</b></span><span class="s6"><b>“</b></span><span class="s4"><b>区块</b></span><span class="s6"><b>”</b></span><span class="s4"><b>和</b></span><span class="s6"><b>“</b></span><span class="s4"><b>区块链</b></span><span class="s6"><b>”</b></span><span class="s4"><b>的世界</b></span></p>
<p class="p3"><span class="s4">好了，对小纸条和交易记录的研究我们点到为止，其实信息量已经是巨大的了，让我们合上盖子，重回较大实体、继续聊聊</span><span class="s6">“</span><span class="s4">区块</span><span class="s6">”</span><span class="s4">和</span><span class="s6">“</span><span class="s4">区块链</span><span class="s6">”</span><span class="s4">的话题。还记得，咱们在一开始讲到关于区块的特征吗？区块创造后被埋在地下，需要经过节点们马不停蹄的挖采、而且是凭运气的挖采才有可能获得</span><span class="s6">——</span><span class="s4">不仅仅如此，事实上他还有其他很多神奇的地方，比如说：</span></p>
<ol class="ol1">
  <li class="li7"><span class="s9"></span><span class="s4">凭空产生的区块在刚刚创建的时候会形成一股强大的黑洞效应，它会尝试将这段时间全世界各个节点上产生的所有小纸条（交易记录）统统吸进来；在合上区块盖子之前，同时会在区块内放上一些数字货币以及其他一些东西。</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">区块拥有一个唯一的</span><span class="s6"> ID</span><span class="s4">，但它只会在这个区块被节点成功从地下挖出来之后创建。这个</span><span class="s6"> ID </span><span class="s4">至少会跟「区块内所有小纸条的集合」、「即将与之相连的上一个区块</span><span class="s6"> ID</span><span class="s4">」以及「挖矿节点的运气值」等因素相关。既然前面我们已经简单了解了</span><span class="s6">“Hash()</span><span class="s4">函数</span><span class="s6">”</span><span class="s4">这个东西，这里不妨透露给大家：</span><span class="s6">“</span><span class="s4">区块</span><span class="s6"> ID = Hash(‘</span><span class="s4">区块内所有小纸条的集合</span><span class="s6">’+’</span><span class="s4">即将与之相连的上一个区块</span><span class="s6"> ID’+‘</span><span class="s4">挖矿节点的运气值</span><span class="s6">’+’…’)” </span><span class="s4">；基于先前掌握的知识，然后你应该知道区块内任意一张小纸条的信息稍微做改动、或者节点挖矿运气好一点坏一点等等，当前区块的</span><span class="s6"> ID </span><span class="s4">都会</span><span class="s6"> “ biu~ ”</span><span class="s4">的发生改变。</span></li>
</ol>
<p class="p3"><span class="s4">基于上述</span><span class="s6"> 1</span><span class="s4">、</span><span class="s6">2 </span><span class="s4">点，如果阅读足够仔细的同学可能会有些头大。在文章开头为了更好的描述，我在设计简化区块链系统的时候故意模棱两可了几个概念，这也许已经误导到了部分同学。这里不得不停下来和你一起修正下之前在你大脑中已经构建的区块链世界观。我们前面讲道，</span><span class="s6">“</span><span class="s4">在节点的视野里，大概每十分钟会凭空产生一个建立在自己平行宇宙世界的神奇区块</span><span class="s6">”</span><span class="s4">。如何正确去理解这句话呢？</span><span class="s6">——</span><span class="s4">拥有上帝之眼的你，可以这么拆解问题、看待问题：</span></p>
<ol class="ol1">
  <li class="li7"><span class="s9"></span><span class="s4">同一个周期内，全网并不是产生唯一的一个区块等待挖掘；每个节点事实上都在周期性的创造区块和挖出区块；只是在某一个节点的视野里，它不能感知到另外一个节点上区块的产生。为何这里要特别强调</span><span class="s6">“</span><span class="s4">在某一个节点的视野里</span><span class="s6">”</span><span class="s4">，就是因为我们刚刚讲到，从区块的视角来说，区块的凭空产生，是基于即将与之相连的上一个区块</span><span class="s6"> ID</span><span class="s4">；而从节点的视角来看，区块的凭空产生是基于当前节点区块链末尾的那个区块</span><span class="s6"> ID </span><span class="s4">产生的。</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">全网会尽力控制在一个周期内只有一个节点能够成功挖出区块，但是不能够完全避免多个节点同时挖出区块的可能性；如何尽力控制？比如说，当大伙挖矿的热情高涨、工作效率提高，区块会被埋在更深更广的地方等。简而言之，通过提高工作难度，来维持这个平衡。另外，值得注意的：产生区块、挖出区块、校验区块，他们的时间周期近乎相同。</span></li>
</ol>
<p class="p9"><span class="s13"><b>挖矿，本质是通过与或运算，去碰撞一个出一个满足规则的随机数。这个部分要细讲的话，估计又可以写出两三千字来。我觉得到目前为止，并不影响主轴知识点的讲解，这一块会作为后续知识结构的完善被撰写（计划</b></span><span class="s14"><b><i> 1 </i></b></span><span class="s13"><b>月</b></span><span class="s14"><b><i> 24 </i></b></span><span class="s13"><b>日前完成）。感兴趣的同学可以</b></span><span class="s14"><b><i> Google </i></b></span><span class="s13"><b>百度查阅下什么叫</b></span><span class="s14"><b><i>“</i></b></span><span class="s13"><b>挖矿</b></span><span class="s14"><b><i>”</i></b></span><span class="s13"><b>、</b></span><span class="s14"><b><i>“</i></b></span><span class="s13"><b>工作量证明</b></span><span class="s14"><b><i> POW”</i></b></span><span class="s13"><b>等。</b></span></p>
<p class="p6"><span class="s8"><b>分叉</b></span></p>
<p class="p3"><span class="s4">现在，我们终于对</span><span class="s6">“</span><span class="s4">区块</span><span class="s6">”</span><span class="s4">这个概念有了更全面的认识，文章开头讲的故事就可以继续展开来絮叨絮叨：</span></p>
<p class="p3"><span class="s4">假如几乎同一时间，「中国上海浦东新区张衡路」上的节点和「美国纽约曼哈顿第五大道」上的节点异口同声喊出来：</span><span class="s6">“</span><span class="s4">我挖到区块了！里面的小纸条都是有效的！奖励归我！</span><span class="s6">”</span><span class="s4">。其他节点也几乎同时参与了对这两个区块的校验，结果发现这俩都没毛病，各节点也开始犯困，因为在他们的视野里他们并不清楚最后哪一个区块应该会被主链接纳。算了！都连在自己区块链尾巴上吧，这时尴尬了，区块链硬生生的被分叉了！</span></p>
<p class="p5"><span class="s7"></span></p>
<p class="p3"><span class="s4">你肯定在想，那还得了，这种情况继续下去，每个节点的区块以及他们整理维护的小纸条都将变得不一样，这已经严重违背了区块链世界里第一大最基本原则</span><span class="s6">——</span><span class="s4">所有节点共同维护同一份数据。所以，为了解决这个问题，区块链世界引入了一条新的规则</span><span class="s6">——</span><span class="s4">拥有最多区块的支链将是真正被认可有价值的，较短的支链将会被直接</span><span class="s6"> Kill </span><span class="s4">掉。</span></p>
<p class="p3"><span class="s4">我们大伙都知道挖矿的过程存在巨大的工作量（如果没有任何难度，把区块扔在人群中，必然同一时间发现区块的节点数量将大大增加，也就会产生无数的支链，通过这个例子，你大概也就能够明白，区块链世界为什么需要设置工作难度了吧），并且在计算机的硅基世界里，不可能出现所谓</span><span class="s6"> “</span><span class="s4">同时</span><span class="s6">” </span><span class="s4">的概念，哪怕纳秒的差别，那也总是会有先后顺序。所以理论上，</span><span class="s6">“</span><span class="s4">分叉</span><span class="s6">”</span><span class="s4">的这种僵局很快会在下一个区块被挖掘出来（以及校验区块）的时候被打破，实在不行下下个，或者下下下个</span><span class="s6">……</span><span class="s4">总之机制可以让整个分叉的区块链世界迅速稳定下来。</span></p>
<p class="p5"><span class="s7"></span></p>
<p class="p3"><span class="s6">“</span><span class="s4">分叉</span><span class="s6">”</span><span class="s4">这种僵局在确认下一个区块（以及校验小纸条）的时候被打破，从而整个区块链世界迅速稳定下来</span></p>
<p class="p3"><span class="s4">就上图而言，所有基于张衡路节点挖矿获得的区块以及后续区块的那条分支被视为有价值，最终会全部保留了下来；其他节点会统一效仿那个拥有更长分支链的节点所做的决策。另外，值得一提的是，同一时间，较短分支上的区块会立即丢弃，而里面的小纸条也会随之释放出来，被重新标记上</span><span class="s6">“</span><span class="s4">未确认</span><span class="s6">”</span><span class="s4">。</span></p>
<p class="p4"><span class="s4"><b>“</b></span><span class="s8"><b>双花</b></span><span class="s4"><b>”</b></span><span class="s8"><b>与</b></span><span class="s4"><b>“51% </b></span><span class="s8"><b>攻击</b></span><span class="s4"><b>”</b></span></p>
<p class="p3"><span class="s4">你可能已经开始困惑或者有点兴奋，末尾几个区块的排序在修复过程中，因为时间差肯定会产生一些模棱两可的地方，这往往会给数据安全埋下一颗雷。一个最简单的假设</span><span class="s6">——</span><span class="s4">我记录的一张小纸条很不巧地被归在了一条较短的支链上，这条支链在竞争过程中理所当然输掉了比赛，区块被丢弃、小纸条被无情的贴上</span><span class="s6">“</span><span class="s4">未确认</span><span class="s6">”</span><span class="s4">的标签。在等待下次区块重新确认的过程中，这个时间差内，我，好像、似乎可以做点什么坏事</span><span class="s6"> </span><span class="s15">ԅ</span><span class="s6">(¯</span><span class="s4">﹃</span><span class="s6">¯</span><span class="s15">ԅ</span><span class="s6">) </span><span class="s4">，就比如说</span><span class="s6">“</span><span class="s4">双花</span><span class="s6">”</span><span class="s4">（双花，花两次，双重支付的意思）</span></p>
<p class="p3"><span class="s4">你脑海中也许很快浮过的这样的构想，可不可能通过下面这种方法触发双花问题的产生，从而让我不劳而获：</span></p>
<p class="p5"><span class="s7"></span></p>
<ol class="ol1">
  <li class="li7"><span class="s9"></span><span class="s4">假设有一个名叫</span><span class="s6"> X-Man </span><span class="s4">的坏家伙，他控制了一个计算机节点，这个节点拥有比地球上任何一个节点算力都强大的计算机集群。</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">首先，</span><span class="s6">X-Man </span><span class="s4">事先创造了一条独立的（不去广而告之）、含有比较多区块的链条。其中一个区块里放着</span><span class="s6">“X-Man </span><span class="s4">转账给</span><span class="s6"> X-Man 1000 </span><span class="s4">元</span><span class="s6">”</span><span class="s4">的纸条。</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">接着，</span><span class="s6">X-Man </span><span class="s4">跟张三购买了一部手机，他在小纸条上记录下</span><span class="s6">“X-Man </span><span class="s4">转账给张三</span><span class="s6"> 1000 </span><span class="s4">元</span><span class="s6">”</span><span class="s4">；这条信息被三次确认后（即三个区块被真实挖出、校验和连接），然后，张三把手机给了</span><span class="s6"> X-Man</span><span class="s4">。</span></li>
  <li class="li7"><span class="s9"></span><span class="s6">X-Man </span><span class="s4">拿到手机之后，按下机房的开关，试图将先前已经创造的区块链条连接在自己这个节点区块链的末尾。</span></li>
  <li class="li7"><span class="s9"></span><span class="s4">大功告成，</span><span class="s6">X-Man </span><span class="s4">拥有了一条更长的区块链条，那些较短、存放着</span><span class="s6">“X-Man </span><span class="s4">转账给张三</span><span class="s6"> 1000 </span><span class="s4">元</span><span class="s6">”</span><span class="s4">的区块链，以及在区块链世界里那则真实转账行为被一同成功销毁。（</span><span class="s6">?</span><span class="s4">）</span></li>
</ol>
<p class="p3"><span class="s4">事实真的如此吗？在这里我可以很负责任的说，</span><span class="s6">too young too simple</span><span class="s4">，区块链世界规则的制定远比我们想象的要健全很多，还记得我们之前讲的</span><span class="s6">“</span><span class="s4">区块的</span><span class="s6"> ID </span><span class="s4">至少会跟区块内所有小纸条的集合、即将与之相连的上一个区块</span><span class="s6"> ID </span><span class="s4">以及挖矿节点的运气值等因素相关</span><span class="s6">”</span><span class="s4">。</span><span class="s6"> </span><span class="s4">在这里，正是因为打算连接到主链的时候，事先准备的链子会意识到马上要连接上的那个区块</span><span class="s6"> ID </span><span class="s4">发生了改变，随之而来的是后面所有区块</span><span class="s6"> ID </span><span class="s4">都瞬间。节点不得不重新对后续区块的解锁以及对区块内小纸条的校验。</span></p>
<p class="p5"><span class="s7"></span></p>
<p class="p3"><span class="s4">在区块链的世界，重新计算的行为等同于把自己（节点）置身于同一个起跑线，跟世界上其他所有的节点一同竞争挖矿。你会说，我拥有更强大的计算能力，但是对不起，跟你竞争的对象并不是第五大道、南京西路、香榭丽舍大道上的某一个节点，而是全球所有算力的集合，在这个集合中，你拥有的算力永远都只是一个很小的子集。所以，根据区块链算力民主、少数服从多数的基本原则，这个构想将永远不会成立。</span></p>
<p class="p4"><span class="s8"><b>除非</b></span><span class="s4"><b>....</b></span></p>
<p class="p3"><span class="s4">你控制着全球</span><span class="s6"> 51%</span><span class="s4">的算力，这也就是区块链世界里另外一个著名的概念，叫做</span><span class="s6">“51% </span><span class="s4">攻击</span><span class="s6">”</span><span class="s4">，但这也仅仅是一个理论值，在真实世界里这样的攻击我个人觉得是很难发动起来的，这里面就牵涉到很多经济、哲学甚至政治的因素。举个最简单的例子：</span><span class="s6">X-Man </span><span class="s4">为了回滚刚刚发生的一笔交易记录，成功发起了</span><span class="s6"> 51% </span><span class="s4">攻击，这意味着很快整个区块链系统将会崩盘，因为这次攻击已经严重伤害到人们对这套系统的信任，接着比特币开始暴跌至几乎一文不值；但是这个拥有</span><span class="s6"> 51% </span><span class="s4">算力的</span><span class="s6"> X-Man </span><span class="s4">原本完完全全可以通过挖矿的方式获取更多收益，购买无数的</span><span class="s6"> iPhone </span><span class="s4">手机。那他不是脑袋不是坏了还能是啥？对</span><span class="s6"> 51% </span><span class="s4">攻击话题感兴趣的同学可以阅读这篇文章《<a href="http://8btc.com/article-1949-1.html"><span class="s16">什么是比特币</span><span class="s17"> 51% </span><span class="s16">攻击？</span></a>》。</span></p>
<p class="p3"><span class="s4">至此，我觉得区块链最基础、最核心的知识已经全部讲完了（除了挖矿内部实现原理，作为一个遗憾留在这里，有时间会完善掉），相信你已经对它有了一个宏观的认识。另外，由于这篇文章采用了适当抽象、类举的叙事方式，中间或多或少有些地方会跟区块链底层严谨的技术实现有出入，欢迎大家来纠错。另外，也是受限于自己知识结构的缺失，这篇文章会随着我对区块链更深入认识后，随时进行修订，最后更新时间可参考该回答下方的时间戳。</span></p>
<p class="p4"><span class="s4">--</span></p>
<p class="p6"><span class="s8"><b>问答部分</b></span></p>
<p class="p6"><span class="s8"><b>去中心化的系统中，到底是谁在发行货币？是无限量发行吗？</b></span></p>
<p class="p3"><span class="s4">比特币的货币是通过挖矿（工作量证明）来发行的，总数量是通过程序写死了</span><span class="s6"> 2100 </span><span class="s4">万个，而第一笔区块奖励也是硬编码写死的。矿工挖出一个区块所获得的奖励，每隔</span><span class="s6"> 21 </span><span class="s4">万个区块将减少一半，按照平均</span><span class="s6"> 10 </span><span class="s4">分钟挖出一个区块的执行效率，也就就说差不多每四年会锐减一次。</span><span class="s6">2009 </span><span class="s4">年</span><span class="s6"> 1 </span><span class="s4">月起每个区块奖励</span><span class="s6"> 50 </span><span class="s4">个比特币，</span><span class="s6">2012 </span><span class="s4">年</span><span class="s6"> 11 </span><span class="s4">月减半为每个区块</span><span class="s6"> 25 </span><span class="s4">个比特币，</span><span class="s6">2016 </span><span class="s4">年</span><span class="s6"> 7 </span><span class="s4">月减半为</span><span class="s6"> 12.5 </span><span class="s4">个比特币。基于这个规则，到</span><span class="s6"> 2140 </span><span class="s4">年，所有比特币</span><span class="s6">(20,999,999,980)</span><span class="s4">将全部发行完毕，之后不会再有新的比特币产生。</span></p>
<p class="p6"><span class="s8"><b>矿工节点的收益除了挖出区块以外还有哪些？</b></span></p>
<p class="p3"><span class="s4">矿工节点的收益主要由两部分组成：</span><span class="s6">1</span><span class="s4">）挖出新区块的奖励；</span><span class="s6">2</span><span class="s4">）挖出新区块内所含交易的交易费。但就目前来说，一个区块内的交易费大概只占到矿工总收入的</span><span class="s6"> 0.5%</span><span class="s4">甚至更少，大部分收益主要还是来自于挖矿所得的比特币奖励。然而，随着挖矿奖励的递减，以及每个区块中包含的交易数量增加，交易费在矿工收益中所占的比重将会逐渐增加。在</span><span class="s6"> 2140 </span><span class="s4">年之后，所有的矿工收益将完全由交易费构成。</span></p>
</body>
</html>
Ytext/htmlUutf-8_file:///index.htmlP    ( : P n }                            